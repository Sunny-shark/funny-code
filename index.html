<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¶£å‘³åŠ¨ç‰©æµ‹è¯•</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .progress-ring-circle {
      transition: stroke-dashoffset 0.35s;
    }
    body {-webkit-tap-highlight-color:transparent; user-select: none;}
    .animal-emoji {
      font-size: 4rem;
      animation: float 3s ease-in-out infinite;
    }
    @keyframes float {
      0% { transform: translateY(0);}
      50% {transform: translateY(-10px);}
      100% {transform: translateY(0);}
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col items-center justify-center p-4">
  <div class="w-full max-w-md mx-auto text-center">
    <h1 class="text-4xl font-bold mb-6 text-blue-400 drop-shadow">æµ‹ä¸€æµ‹ä½ æ˜¯å“ªç§åŠ¨ç‰© ğŸ¾</h1>
    <div class="bg-white rounded-3xl shadow p-6 mb-8">
      <div id="test-area" class="mb-6">
        <div class="relative w-48 h-48 mx-auto">
          <svg class="progress-ring absolute top-0 left-0" width="192" height="192">
            <circle
              class="text-gray-200"
              stroke-width="10"
              stroke="currentColor"
              fill="transparent"
              r="86"
              cx="96"
              cy="96"
            />
            <circle
              id="progress-circle"
              class="text-blue-300 progress-ring-circle"
              stroke-width="10"
              stroke="currentColor"
              fill="transparent"
              r="86"
              cx="96"
              cy="96"
              stroke-dasharray="540"
              stroke-dashoffset="540"
            />
          </svg>
          <div id="press-hint" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 select-none">
            <div class="text-5xl mb-2">ğŸ‘‡</div>
            <p class="text-lg text-gray-600">é•¿æŒ‰è¿™é‡Œæ£€æµ‹</p>
          </div>
          <div id="progress-text" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-xl font-bold hidden">
            <span id="progress-percentage">0%</span>
          </div>
        </div>
        <p id="instruction" class="text-gray-600 mt-6">é•¿æŒ‰åœ†åœˆä¸­å¤®ï¼Œçœ‹çœ‹ä½ æ˜¯ä»€ä¹ˆåŠ¨ç‰©ï¼</p>
      </div>
      <div id="result-area" class="hidden">
        <div class="flex flex-col items-center min-h-[180px] mb-4">
          <div id="animal-emoji" class="animal-emoji"></div>
          <h2 id="result-title" class="text-2xl font-bold mb-2"></h2>
          <p id="result-description" class="text-gray-600"></p>
        </div>
        <p class="text-gray-400 text-sm">ç»“æœå·²ä¿å­˜ï¼Œåˆ·æ–°ä¸ä¼šæ”¹å˜ï¼Œä¹Ÿä¸èƒ½é‡æ–°æµ‹è¯•ã€‚</p>
      </div>
    </div>
    <footer class="text-gray-400 text-sm">ä½œè€…ï¼šSunny-shark ğŸ¦ˆ</footer>
  </div>
  <script>
    // ç»“æœæ•°æ®
    const animalResults = [
      { emoji: "ğŸ¶", name: "å°ç‹—", description: "ä½ åƒå°ç‹—ä¸€æ ·çƒ­æƒ…å¼€æœ—ï¼" },
      { emoji: "ğŸ±", name: "å°çŒ«", description: "ä½ åƒå°çŒ«ä¸€æ ·å¯çˆ±æ¸©é¡ºï¼" },
      { emoji: "ğŸ°", name: "å…”å­", description: "ä½ æ´»æ³¼çµåŠ¨ï¼Œåƒåªå°å…”å­~" },
      { emoji: "ğŸ¦Š", name: "å°ç‹ç‹¸", description: "æœºæ™ºåˆè°ƒçš®çš„å°ç‹ç‹¸~" },
      { emoji: "ğŸ»", name: "å°ç†Š", description: "æ†¨åšè®¤çœŸçš„å°ç†Šï¼Œæ˜¯ä½ !" },
      { emoji: "ğŸ¯", name: "å°è€è™", description: "å¨çŒ›ä¸­å¸¦ç‚¹å‘†èŒçš„å°è€è™ï¼" },
      { emoji: "ğŸ·", name: "å°çŒª", description: "è½¯ç³¯Qå¼¹çš„å°çŒªä»”ï¼" },
      { emoji: "ğŸ¦", name: "å°ç‹®å­", description: "æœ‰ç‚¹éœ¸æ°”åˆå¾ˆå¯çˆ±ï¼" },
      { emoji: "ğŸµ", name: "çŒ´å­", description: "çµå·§å¤æ€ªçš„å¼€å¿ƒæœï¼" },
      { emoji: "ğŸ§", name: "ä¼é¹…", description: "å–œæ¬¢æŠ±å›¢ï¼Œè¶…èŒè¶…æ²»æ„ˆï¼" }
    ];
    const testArea = document.getElementById('test-area');
    const resultArea = document.getElementById('result-area');
    const progressCircle = document.getElementById('progress-circle');
    const progressText = document.getElementById('progress-text');
    const progressPercentage = document.getElementById('progress-percentage');
    const pressHint = document.getElementById('press-hint');
    const instruction = document.getElementById('instruction');
    const animalEmoji = document.getElementById('animal-emoji');
    const resultTitle = document.getElementById('result-title');
    const resultDescription = document.getElementById('result-description');
    // è¿›åº¦æ¡å‚æ•°
    const circumference = 2 * Math.PI * 86;
    const requiredHoldTime = 2000;
    let startTime = 0, isHolding = false, progressInterval;
    progressCircle.style.strokeDasharray = circumference;
    progressCircle.style.strokeDashoffset = circumference;
    // åŠ è½½ç»“æœ
    let saved = localStorage.getItem('animalTestResult');
    if(saved){
      showResult(JSON.parse(saved));
    }
    function handleHoldStart(e){
      e.preventDefault();
      if(localStorage.getItem('animalTestResult')) return;
      isHolding = true;
      startTime = Date.now();
      progressText.classList.remove('hidden');
      pressHint.classList.add('hidden');
      instruction.textContent = 'æ£€æµ‹ä¸­...';
      progressInterval = setInterval(updateProgress, 30);
    }
    function handleHoldEnd(){
      if(localStorage.getItem('animalTestResult')) return;
      isHolding = false;
      clearInterval(progressInterval);
      resetProgress();
      instruction.textContent = 'é•¿æŒ‰åœ†åœˆä¸­å¤®ï¼Œçœ‹çœ‹ä½ æ˜¯ä»€ä¹ˆåŠ¨ç‰©ï¼';
    }
    function updateProgress(){
      if(!isHolding) return;
      const elapsed = Date.now() - startTime;
      const progress = Math.min(elapsed / requiredHoldTime, 1);
      progressCircle.style.strokeDashoffset = circumference - (progress * circumference);
      progressPercentage.textContent = Math.round(progress*100) + "%";
      if(progress>=1){
        clearInterval(progressInterval);
        generateResult();
      }
    }
    function resetProgress(){
      clearInterval(progressInterval);
      progressCircle.style.strokeDashoffset = circumference;
      progressText.classList.add('hidden');
      pressHint.classList.remove('hidden');
      progressPercentage.textContent = '0%';
    }
    function generateResult(){
      const i = Math.floor(Math.random()*animalResults.length);
      const result = animalResults[i];
      localStorage.setItem('animalTestResult', JSON.stringify(result));
      showResult(result);
    }
    function showResult(result){
      testArea.classList.add('hidden');
      resultArea.classList.remove('hidden');
      animalEmoji.textContent = result.emoji;
      resultTitle.textContent = result.name;
      resultDescription.textContent = result.description;
    }
    const progressContainer = document.querySelector('.relative');
    progressContainer.addEventListener('mousedown', handleHoldStart);
    progressContainer.addEventListener('touchstart', handleHoldStart);
    document.addEventListener('mouseup', handleHoldEnd);
    document.addEventListener('touchend', handleHoldEnd);
    document.addEventListener('touchcancel', handleHoldEnd);
  </script>
</body>
</html>
